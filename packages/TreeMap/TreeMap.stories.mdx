import { Meta, Preview, Story, Props, Source, Description } from '@storybook/addon-docs/blocks';
import TreeMap from './index.vue'
import { withKnobs, text, select, object } from '@storybook/addon-knobs'
import { RplContainer, RplRow, RplCol } from '@dpc-sdp/ripple-grid'
import _merge from 'lodash.merge'
import { treeMapTemplate, chartData } from './storiesConstants.js'

<Meta title="Tree Map" component={ TreeMap } decorators={ [withKnobs] } />

# Tree Map

<Description of={ TreeMap } type='docgen' />

## Installation

```bash
npm install @dpc-sdp/yourvic-treemap --save
```

## Import

```javascript
import { TreeMap } from '@dpc-sdp/yourvic-treemap'
```

## Usage

```html
<tree-map
  :data="data" :valueAttr="value" :labelAttr="name"
/>
```

## Props

<Props of={ TreeMap } />

## Default

<Preview>
  <Story name="Default">
    {
      {
        components: { TreeMap },
        template: `
          <div :style="divStyle">
            <tree-map :title="title" :data="data" :valueAttr="valueAttr" :labelAttr="labelAttr" :dataFormat="dataFormat" :shortDesc="shortDesc" :longDesc="longDesc" />
          </div>
        `,
        props: {
          title: {
            default: text('title', undefined)
          },
          data: {
            default: () => object('data', chartData)
          },
          valueAttr: {
            default: text('valueAttr', 'value')
          },
          labelAttr: {
            default: text('labelAttr', 'name')
          },
          dataFormat: {
            default: select('data format', { normal: 'normal', percentage: 'percentage', dollar: 'dollar', 'thousand dollar': 'thousandDollar' }, 'normal')
          },
          shortDesc: {
            default: text('shortDesc', 'tree map')
          },
          longDesc: {
            default: text('longDesc', '')
          },
          divStyle: {
            default: () => object('divStyle', { width: '400px', height: '400px' })
          }
        }
      }
    }
  </Story>
</Preview>

## With title

<Preview>
  <Story name="With title">
    {
      {
       components: { TreeMap },
       template: treeMapTemplate,
       props: {
        title: { default: () => 'Sample Chart' },
        data: { default: () => chartData },
        valueAttr: { default: () => 'value' },
        labelAttr: { default: () => 'name' },
        dataFormat: { default: () => 'normal' },
        shortDesc: { default: () => '' },
        longDesc: { default: () => null }
       }
      }
    }
  </Story>
</Preview>

## Invalid data provided

<Preview>
  <Story name="Invalid data provided">
    {
      {
       components: { TreeMap },
       template: treeMapTemplate,
       props: {
        title: { default: () => undefined },
        data: { default: () => {} },
        valueAttr: { default: () => 'value' },
        labelAttr: { default: () => 'name' },
        dataFormat: { default: () => 'normal' },
        shortDesc: { default: () => '' },
        longDesc: { default: () => null }
       }
      }
    }
  </Story>
</Preview>

## With link to long description

<Preview>
  <Story name="With link to long description">
    {
      {
       components: { TreeMap },
       template: `
        <div style="width: 400px; height: 400px">
          <tree-map :title="title" :data="data" :valueAttr="valueAttr" :labelAttr="labelAttr" :dataFormat="dataFormat" :shortDesc="shortDesc" :longDesc="longDesc" />
        </div>
      `,
       props: {
        title: { default: () => 'Sample Chart' },
        data: { default: () => chartData },
        valueAttr: { default: () => 'value' },
        labelAttr: { default: () => 'name' },
        dataFormat: { default: () => 'normal' },
        shortDesc: { default: () => 'bar chart' },
        longDesc: { default: () => 'https://www.w3.org' }
       }
      }
    }
  </Story>
</Preview>

## Ripple Grid

<Preview>
  <Story name="Ripple Grid">
    {
      {
       components: { TreeMap, RplContainer, RplRow, RplCol },
       template: `
        <RplContainer style="width: 100%">
          <rpl-row>
            <rpl-col cols=1></rpl-col>
            <rpl-col cols=10>
              <div style="width: 100%; height: 100vh">
                <tree-map :title="title" :data="data" :valueAttr="valueAttr" :labelAttr="labelAttr" :dataFormat="dataFormat" />
              </div>
            </rpl-col>
            <rpl-col cols=1></rpl-col>
          </rpl-row>
        </RplContainer>
       `,
       props: {
        title: { default: () => 'Ripple Grid Chart' },
        data: { default: () => chartData },
        valueAttr: { default: () => 'value' },
        labelAttr: { default: () => 'name' },
        dataFormat: { default: () => 'normal' },
        shortDesc: { default: () => '' },
        longDesc: { default: () => null }
       }
      }
    }
  </Story>
</Preview>
